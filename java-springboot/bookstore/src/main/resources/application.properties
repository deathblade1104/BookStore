spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:postgres}?currentSchema=${DB_SCHEMA:bookstore}
spring.datasource.username=${PG_USER}
spring.datasource.password=${PG_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.default_schema=${DB_SCHEMA:bookstore}
# Disable open-in-view to prevent N+1 queries and improve performance
spring.jpa.open-in-view=false
# Spring Boot 3.x handles naming strategy automatically - no need to specify

server.port=8080
spring.application.name=bookstore

spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=6000
spring.cache.type=redis

# ==========================
# Kafka Configuration
# ==========================
spring.kafka.bootstrap-servers=${KAFKA_BROKERS:localhost:9092}
spring.kafka.client-id=${KAFKA_CLIENT_ID:bookstore-service}
spring.kafka.consumer.group-id=${KAFKA_GROUP_ID:bookstore-consumer-group}
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false

# Serialization
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer

# ==========================
# OpenSearch Configuration
# ==========================
spring.elasticsearch.uris=${ELASTICSEARCH_URL:http://localhost:9200}
spring.elasticsearch.username=${ELASTICSEARCH_USERNAME:elastic}
spring.elasticsearch.password=${ELASTICSEARCH_PASSWORD:password}
spring.elasticsearch.connection-timeout=5s
spring.elasticsearch.socket-timeout=30s

# ==========================
# AWS S3 Configuration
# ==========================
aws.s3.region=${AWS_REGION:us-east-1}
aws.s3.bucket=${AWS_BOOKSTORE_BUCKET:bookstore-files}
aws.s3.access-key=${AWS_ACCESS_KEY_ID:}
aws.s3.secret-key=${AWS_SECRET_ACCESS_KEY:}
aws.s3.endpoint=${AWS_S3_ENDPOINT:}
aws.s3.presigned-url-expiration-minutes=15

# ==========================
# JWT Configuration
# ==========================
# JWT secret must be at least 32 characters (256 bits) for HMAC-SHA256
# In production, use a strong random secret stored securely (e.g., environment variable, secrets manager)
jwt.secret=${JWT_SECRET:supersecretjwtkeyforbookstoreapplication2024verysecurekey}
jwt.expiration=${JWT_EXPIRY:60m}
